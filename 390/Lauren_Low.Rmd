---
title: "census visualization"
author: "Lauren Low"
date: "September 16, 2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(dplyr)
library(readr)
library(tsibble)
library(lubridate)
library(fpp3)
```

```{r loading csv and creating census table}
urlfile = "https://raw.githubusercontent.com/390-2020-09-Fall/SCBI-ForestGEO-Data/master/tree_main_census/data/census-csv-files/scbi.stem1.csv"
census <- read_csv(url(urlfile))
```

```{r cleaning up/wrangling tree census data}
census_time <- census %>%
  na.omit(census) %>%
  mutate(
    date = as_date(date),
    month = floor_date(date, unit = "month"),
    yearmonth = yearmonth(month)) %>% 
  group_by(yearmonth) %>%
  summarize(avg_dbh = mean(dbh)) %>%
  as_tsibble(index = yearmonth) 
```

```{r plotting avg_dbh over time}
dbh_time_plot <- census_time %>% autoplot(avg_dbh)
dbh_time_plot
```